import streamlit as st
import pandas as pd

# ────────────────────────────────────────────────
# 1) 페이지 설정 (와이드 레이아웃)
# ────────────────────────────────────────────────
st.set_page_config(
    page_title="경동나비엔 가스보일러 급배기전환 모델 확인 프로그램",
    layout="wide"
)

# ────────────────────────────────────────────────
# 2) 세션 상태 초기화 (page)
# ────────────────────────────────────────────────
if 'page' not in st.session_state:
    st.session_state.page = "model"  # 초기 페이지: 모델 안내 페이지

# ────────────────────────────────────────────────
# 3) 전체 표 데이터 (질문에서 제공된 최신 기준)
#    "급배기 방식 전환 여부" 열은 "전환여부"라는 키로 저장
# ────────────────────────────────────────────────

data = [
    # ── 일반형 개방식 ──
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB513", "연료": "LNG", "급배기방식": "FF",
     "용량": "13K, 16K, 20K, 25K, 30K, 35K", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB513", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB513", "연료": "LPG", "급배기방식": "FF",
     "용량": "13K, 16K, 20K, 25K, 30K, 35K", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB513", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},

    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB553", "연료": "LNG", "급배기방식": "FF",
     "용량": "13K, 16K, 20K, 25K, 30K, 35K", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB553", "연료": "LNG", "급배기방식": "FE",
     "용량": "13K, 16K, 20K, 25K, 30K, 35K", "비고": "대리점유통", "전환여부": "전환가능"},

    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB553", "연료": "LPG", "급배기방식": "FF",
     "용량": "13K, 16K", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB553", "연료": "LPG", "급배기방식": "FF",
     "용량": "20K, 25K, 30K, 35K", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB553", "연료": "LPG", "급배기방식": "FE",
     "용량": "20K, 25K, 30K, 35K", "비고": "대리점유통", "전환여부": "전환가능"},

    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB514", "연료": "LNG", "급배기방식": "FF",
     "용량": "13K, 16K, 20K, 25K, 30K, 35K", "비고": "대리점신축(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB514", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB514", "연료": "LPG", "급배기방식": "FF",
     "용량": "13K, 16K, 20K, 25K, 30K, 35K", "비고": "대리점신축(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB514", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축(개발중)", "전환여부": "전환불가"},

    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB554", "연료": "LNG", "급배기방식": "FF",
     "용량": "13K, 16K, 20K, 25K, 30K, 35K", "비고": "대리점유통(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB554", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB554", "연료": "LPG", "급배기방식": "FF",
     "용량": "13K, 16K, 20K, 25K, 30K, 35K", "비고": "대리점유통(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "개방식", "모델명": "NGB554", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통(개발중)", "전환여부": "전환불가"},

    # ── 콘덴싱 개방식 ──
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NGB311", "연료": "LNG", "급배기방식": "FF",
     "용량": "15K, 18K, 22K, 27K, 33K, 36K", "비고": "특판(단종예정)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NGB311", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판(단종예정)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NGB311", "연료": "LPG", "급배기방식": "FF",
     "용량": "15K, 18K, 22K, 27K, 33K, 36K", "비고": "특판(단종예정)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NGB311", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판(단종예정)", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB314", "연료": "LNG", "급배기방식": "FF",
     "용량": "15K, 18K, 22K, 27K, 33K, 36K", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB314", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB314", "연료": "LPG", "급배기방식": "FF",
     "용량": "15K, 18K, 22K, 27K, 33K, 36K", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB314", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB324", "연료": "LNG", "급배기방식": "FF",
     "용량": "15K, 18K, 22K, 27K, 33K", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB324", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB324", "연료": "LPG", "급배기방식": "FF",
     "용량": "15K, 18K, 22K, 27K, 33K", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB324", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB354", "연료": "LNG", "급배기방식": "FF",
     "용량": "15K, 18K, 22K, 27K, 33K", "비고": "대리점 유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB354", "연료": "LNG", "급배기방식": "FE",
     "용량": "15K, 18K, 22K, 27K, 33K", "비고": "대리점 유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB354", "연료": "LPG", "급배기방식": "FF",
     "용량": "15K, 18K, 22K, 27K, 33K", "비고": "대리점 유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB354", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점 유통", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB384", "연료": "LNG", "급배기방식": "FF",
     "용량": "18K, 22K, 27K, 33K", "비고": "수요개발", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB384", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB384", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB384", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발", "전환여부": "전환불가"},

    # NCB553 LNG FF 22L, 27L, 33L, 43L → "43L만 전환가능" 예시
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB553", "연료": "LNG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB553", "연료": "LNG", "급배기방식": "FF",
     "용량": "43L", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB553", "연료": "LNG", "급배기방식": "FE",
     "용량": "43L", "비고": "대리점유통", "전환여부": "전환가능"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB553", "연료": "LPG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB553", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB583", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB583", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB583", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB583", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB713", "연료": "LNG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB713", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB713", "연료": "LPG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB713", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB753", "연료": "LNG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB753", "연료": "LNG", "급배기방식": "FF",
     "용량": "43L", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB753", "연료": "LNG", "급배기방식": "FE",
     "용량": "43L", "비고": "대리점유통", "전환여부": "전환가능"},  
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB753", "연료": "LPG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB753", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB783", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB783", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB783", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB783", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB900", "연료": "LNG", "급배기방식": "FF",
     "용량": "43L, 52L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB900", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB900", "연료": "LPG", "급배기방식": "FF",
     "용량": "43L, 52L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB900", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NPW", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "단품용", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NPW", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "단품용", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NPW", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "단품용", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NPW", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "단품용", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "단품용", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "단품용", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "단품용", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "개방식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "단품용", "전환여부": "전환불가"},

    # ── 캐스케이드용 개방식 ──
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NPW", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NPW", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NPW", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NPW", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},

    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},

    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},
    {"구분": "캐스케이드용", "세부구분": "개방식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "캐스케이드용", "전환여부": "전환불가"},

    # ── 일반형 밀폐식 ──
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB513", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB513", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB513", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB513", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},

    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB553", "연료": "LNG", "급배기방식": "FF",
     "용량": "13L, 16L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB553", "연료": "LNG", "급배기방식": "FF",
     "용량": "20L, 25L, 30L, 35L", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB553", "연료": "LNG", "급배기방식": "FE",
     "용량": "20L, 25L, 30L, 35L", "비고": "대리점유통", "전환여부": "전환가능"},

    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB553", "연료": "LPG", "급배기방식": "FF",
     "용량": "13L, 16L, 20L, 25L, 30L, 35L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB553", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환불가"},

    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB514", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "대리점신축(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB514", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB514", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "대리점신축(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB514", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축(개발중)", "전환여부": "전환불가"},

    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB554", "연료": "LNG", "급배기방식": "FF",
     "용량": "13L, 16L, 20L, 25L, 30L, 35L", "비고": "대리점유통(개발중)", "전환여부": "전환가능"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB554", "연료": "LNG", "급배기방식": "FE",
     "용량": "13L, 16L, 20L, 25L, 30L, 35L", "비고": "대리점유통(개발중)", "전환여부": "전환가능"},

    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB554", "연료": "LPG", "급배기방식": "FF",
     "용량": "13L, 16L, 20L, 25L, 30L, 35L", "비고": "대리점유통(개발중)", "전환여부": "전환불가"},
    {"구분": "일반형", "세부구분": "밀폐식", "모델명": "NGB554", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통(개발중)", "전환여부": "전환불가"},

    # ── 콘덴싱 밀폐식 ──
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NGB311", "연료": "LNG", "급배기방식": "FF",
     "용량": "18L, 22L, 27L, 33L, 36L, 43L", "비고": "특판(단종예정)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NGB311", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판(단종예정)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NGB311", "연료": "LPG", "급배기방식": "FF",
     "용량": "18L, 22L, 27L, 33L", "비고": "특판(단종예정)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NGB311", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판(단종예정)", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB314", "연료": "LNG", "급배기방식": "FF",
     "용량": "18L, 22L, 27L, 33L, 36L, 43L", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB314", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB314", "연료": "LPG", "급배기방식": "FF",
     "용량": "18L, 22L, 27L, 33L, 36L", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB314", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB324", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB324", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB324", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB324", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점신축", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB354", "연료": "LNG", "급배기방식": "FF",
     "용량": "15L, 18L, 22L, 27L, 33L", "비고": "대리점 유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB354", "연료": "LNG", "급배기방식": "FE",
     "용량": "15L, 18L, 22L, 27L, 33L", "비고": "대리점 유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB354", "연료": "LPG", "급배기방식": "FF",
     "용량": "15L, 18L, 22L, 27L, 33L", "비고": "대리점 유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB354", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점 유통", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB384", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB384", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB384", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB384", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발", "전환여부": "전환불가"},

    # NCB553 LNG FF 22L, 27L, 33L, 43L → "43L만 전환가능" 예시
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB553", "연료": "LNG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB553", "연료": "LNG", "급배기방식": "FF",
     "용량": "43L", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB553", "연료": "LNG", "급배기방식": "FE",
     "용량": "43L", "비고": "대리점유통", "전환여부": "전환가능"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB553", "연료": "LPG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB553", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB583", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB583", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB583", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB583", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB713", "연료": "LNG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB713", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB713", "연료": "LPG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "특판", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB713", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "특판", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB753", "연료": "LNG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB753", "연료": "LNG", "급배기방식": "FF",
     "용량": "43L", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB753", "연료": "LNG", "급배기방식": "FE",
     "용량": "43L", "비고": "대리점유통", "전환여부": "전환가능"},  
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB753", "연료": "LPG", "급배기방식": "FF",
     "용량": "22K, 27K, 33K, 43L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB753", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB783", "연료": "LNG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB783", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB783", "연료": "LPG", "급배기방식": "FF",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB783", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "수요개발(사양통보X)", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB900", "연료": "LNG", "급배기방식": "FF",
     "용량": "43L, 52L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB900", "연료": "LNG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB900", "연료": "LPG", "급배기방식": "FF",
     "용량": "43L, 52L", "비고": "대리점유통", "전환여부": "전환불가"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB900", "연료": "LPG", "급배기방식": "FE",
     "용량": "없음", "비고": "대리점유통", "전환여부": "전환불가"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NPW", "연료": "LNG", "급배기방식": "FF",
     "용량": "36KSS, 36KDS, 48KSS, 48KDS", "비고": "단품용", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NPW", "연료": "LNG", "급배기방식": "FE",
     "용량": "36KSS, 36KDS, 48KSS, 48KDS", "비고": "단품용", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NPW", "연료": "LPG", "급배기방식": "FF",
     "용량": "36KSS, 36KDS, 48KSS, 48KDS", "비고": "단품용", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NPW", "연료": "LPG", "급배기방식": "FE",
     "용량": "36KSS, 36KDS, 48KSS, 48KDS", "비고": "단품용", "전환여부": "전환가능"},

    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FF",
     "용량": "45LSS, 75LSS, 100LSS", "비고": "단품용", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FE",
     "용량": "45LSS, 75LSS, 100LSS", "비고": "단품용", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FF",
     "용량": "45LSS, 75LSS, 100LSS", "비고": "단품용", "전환여부": "전환가능"},
    {"구분": "콘덴싱", "세부구분": "밀폐식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FE",
     "용량": "45LSS, 75LSS, 100LSS", "비고": "단품용", "전환여부": "전환가능"},

    # ── 캐스케이드용 밀폐식 ──
    {"구분": "캐스케이드용", "세부구분": "밀폐식", "모델명": "NPW", "연료": "LNG", "급배기방식": "FF",
     "용량": "36KS, 36KD, 48KS, 48KD", "비고": "캐스케이드용", "전환여부": "전환가능"},
    {"구분": "캐스케이드용", "세부구분": "밀폐식", "모델명": "NPW", "연료": "LNG", "급배기방식": "FE",
     "용량": "36KS, 36KD, 48KS, 48KD", "비고": "캐스케이드용", "전환여부": "전환가능"},
    {"구분": "캐스케이드용", "세부구분": "밀폐식", "모델명": "NPW", "연료": "LPG", "급배기방식": "FF",
     "용량": "36KS, 36KD, 48KS, 48KD", "비고": "캐스케이드용", "전환여부": "전환가능"},
    {"구분": "캐스케이드용", "세부구분": "밀폐식", "모델명": "NPW", "연료": "LPG", "급배기방식": "FE",
     "용량": "36KS, 36KD, 48KS, 48KD", "비고": "캐스케이드용", "전환여부": "전환가능"},

    {"구분": "캐스케이드용", "세부구분": "밀폐식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FF",
     "용량": "45LS, 75LS, 100LS", "비고": "캐스케이드용", "전환여부": "전환가능"},
    {"구분": "캐스케이드용", "세부구분": "밀폐식", "모델명": "NCB790", "연료": "LNG", "급배기방식": "FE",
     "용량": "45LS, 75LS, 100LS", "비고": "캐스케이드용", "전환여부": "전환가능"},
    {"구분": "캐스케이드용", "세부구분": "밀폐식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FF",
     "용량": "45LS, 75LS, 100LS", "비고": "캐스케이드용", "전환여부": "전환가능"},
    {"구분": "캐스케이드용", "세부구분": "밀폐식", "모델명": "NCB790", "연료": "LPG", "급배기방식": "FE",
     "용량": "45LS, 75LS, 100LS", "비고": "캐스케이드용", "전환여부": "전환가능"},
]

df = pd.DataFrame(data)

# ────────────────────────────────────────────────
# 4) 부분 용량 전환가능(43L만, 52L만 등) 처리를 위한 함수
# ────────────────────────────────────────────────
def capacity_filter(row, selected_capacity):
    if "43L만 전환가능" in row["전환여부"]:
        return selected_capacity == "43L"
    elif "52L 전환가능(예정)" in row["전환여부"]:
        return selected_capacity == "52L"
    elif "43L 전환가능" in row["전환여부"]:
        return selected_capacity == "43L"

    if row["용량"].strip() == "없음":
        return selected_capacity == "없음"
    else:
        row_caps = [c.strip() for c in row["용량"].split(",")]
        return selected_capacity in row_caps

# ────────────────────────────────────────────────
# 5) 페이지별 화면 구성
# ────────────────────────────────────────────────
if st.session_state.page == "model":
    # [ 첫 번째 페이지: 모델 안내 페이지 ]
    st.title("경동나비엔 가스보일러 급배기전환 모델 확인 프로그램")

    instructions_html = """
    <div>
      <h3>1. 급배기방식 전환 절차</h3>
      <p>1) 가스보일러 포장박스 및 제품 명판에 "<u><b>본 제품은 급배기방식 (FF/FE) 전환이 가능합니다</b></u>" 라는 전환가능표시가 있는지 확인해주세요.</p>
      <p style="margin-left:20px;">(<span style="color:red;">※ 제품 명판에 전환가능문구가 없으면 급배기전환 불가</span>)</p>
      <p>2) 전환설치가 가능한 제품은 설치설명서에 따라 작업해주세요.</p>
      <p>3) 급배기방식 전환 후에는 가스보일러 본체 잘 보이는 위치에 "가스보일러 급배기전환 표지판" 부착해주세요.</p>
      <p>4) 완성, 정기검사시 "연소기 변경 확인서"를 검사처로 제출해주세요</p>
      <p style="margin-left:20px;">- 특정가스사용시설 또는 LPG 특정사용시설 등 → 안전공사검사원에게 제출</p>
      <p style="margin-left:20px;">- 특정가스사용시설 외 가정용보일러 설치시설 등 → 도시가스사에 제출</p>
    </div>
    <div>
      <h3>2. 급배기방식 전환 작업자의 자격 : 아래 항목 중 하나를 선택해주세요.  </h3>
    </div>
    """
    st.markdown(instructions_html, unsafe_allow_html=True)
    
    qualification = st.radio("급배기전환 작업이 가능한 작업자인지 확인해주세요.", options=[
        "가스보일러 제조사의 A/S 종사자",
        "가스보일러 판매업체 직원으로서 가스보일러 제조사의 A/S 교육을 받은 자",
        "가스보일러 판매업체 직원으로서 A/S 업무에 2년 이상 근무한 자",
        "해당없음"
    ])
    
    if qualification == "해당없음":
        st.markdown('<p style="color:red; font-weight:bold;">※ 위 자격이 없는 설치업자는 급배기방식을 전환하여 설치할 수 없습니다.</p>', unsafe_allow_html=True)
        st.stop()
    else:
        if st.button("급배기전환 작업이 가능합니다."):
            st.session_state.page = "product"
            st.stop()

elif st.session_state.page == "product":
    # [ 두 번째 페이지: 제품 판별 페이지 ]
    st.title("경동나비엔 가스보일러 급배기전환 모델 확인 프로그램")

    top_left, top_right = st.columns([3, 1])
    with top_right:
        if st.button("이전"):
            st.session_state.page = "model"
       
    st.markdown("### 급배기전환 제품을 선택하세요:")

    row1_col1, row1_col2 = st.columns(2)
    with row1_col1:
        selected_gujun = st.selectbox("1. 구분 (일반형/콘덴싱/캐스케이드용)", ["일반형", "콘덴싱", "캐스케이드용"])
    with row1_col2:
        selected_fuel = st.radio("3. 사용연료 (LNG/LPG)", ["LNG", "LPG"])

    row2_col1, row2_col2 = st.columns(2)
    with row2_col1:
        selected_sebu = st.selectbox("2. 세부구분 (개방식/밀폐식)", ["개방식", "밀폐식"])
    with row2_col2:
        selected_vent = st.radio("4. 급배기방식 (FF/FE)", ["FF", "FE"])

    filtered_df = df[
        (df["구분"] == selected_gujun) &
        (df["세부구분"] == selected_sebu) &
        (df["연료"] == selected_fuel) &
        (df["급배기방식"] == selected_vent)
    ]

    model_options = filtered_df["모델명"].unique().tolist() if not filtered_df.empty else []
    if model_options:
        row3_col1, row3_col2 = st.columns(2)
        with row3_col1:
            selected_model = st.selectbox("5. 모델명", model_options)
        with row3_col2:
            model_filtered_df = filtered_df[filtered_df["모델명"] == selected_model]
            capacity_options = []
            for cap_str in model_filtered_df["용량"].unique():
                cap_str = cap_str.strip()
                if cap_str == "없음":
                    if "없음" not in capacity_options:
                        capacity_options.append("없음")
                else:
                    for cap in cap_str.split(","):
                        cap = cap.strip()
                        if cap not in capacity_options:
                            capacity_options.append(cap)
            if capacity_options:
                selected_capacity = st.selectbox("6. 용량", capacity_options)
            else:
                selected_capacity = None
                st.warning("해당 모델의 용량 정보가 없습니다.")
    else:
        st.warning("선택한 조건에 맞는 모델이 없습니다.")
        selected_model = None
        selected_capacity = None

    if st.button("판별하기"):
        if not filtered_df.empty and selected_model and selected_capacity is not None:
            final_df = filtered_df[filtered_df["모델명"] == selected_model]
            final_df = final_df[final_df.apply(lambda row: capacity_filter(row, selected_capacity), axis=1)]
            if final_df.empty:
                st.warning("선택한 용량에 맞는 모델이 없습니다. (또는 전환불가)")
            else:
                row_data = final_df.iloc[0]
                remark = row_data["비고"]
                gujun = row_data["구분"]
                sebu = row_data["세부구분"]
                fuel = row_data["연료"]
                vent = row_data["급배기방식"]
                model = row_data["모델명"]
                capacity = selected_capacity
                result = row_data["전환여부"]
                if "전환불가" in result:
                    status_html = '<span style="color: red; font-weight: bold;">전환불가</span>'
                elif "전환가능" in result:
                    status_html = '<span style="color: blue; font-weight: bold;">전환가능</span>'
                else:
                    status_html = f'<span>{result}</span>'
                if gujun == "캐스케이드용":
                    output_html = (
                        f"{remark}에 설치되는 가스보일러 "
                        f"{model}-{capacity} "
                        f"({sebu}, {fuel}, {vent}) 는 급배기방식 {status_html} 합니다."
                    )
                else:
                    output_html = (
                        f"{remark}에 설치되는 {gujun} 가스보일러 "
                        f"{model}-{capacity} "
                        f"({sebu}, {fuel}, {vent}) 는 급배기방식 {status_html} 합니다."
                    )
                st.markdown(output_html, unsafe_allow_html=True)
        else:
            st.warning("모든 항목을 선택해주세요.")
